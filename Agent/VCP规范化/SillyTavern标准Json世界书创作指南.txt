### SillyTavern World Info (Character Book) Creation Guide

* [Go to English Version (For English native speakers and LLMs)](#english-version-st-world-info)
* [è·³è½¬è‡³ä¸­æ–‡ç‰ˆ (é€‚ç”¨äºä¸­æ–‡æ¯è¯­è€…)](#chinese-version-st-world-info)

---
<a name="english-version-st-world-info"></a>
### **English Version**
---

**A Creator's Guide to World Info & Character Books in SillyTavern**

**Document Purpose:**
This guide provides technical specifications and best practices for creating effective World Info (also known as Lorebooks, Memory Books, or `character_book`), a powerful tool for dynamically inserting context into your chat to guide AI replies in SillyTavern.

---
### **Part 1: Introduction & Core Concepts**

World Info (WI) is a dynamic dictionary. It inserts relevant information from its entries only when associated keywords are present in the recent chat history. This allows you to build deep, consistent narrative worlds without overloading the context window.

**Key Principles:**
*   **The "English-Only Content" Rule:** For maximum effectiveness, it is **strongly recommended** that the `content` of all worldbook entries be written in **English**. This allows the AI model to leverage its core training data most effectively, regardless of the character's primary dialogue language.
*   **Standalone Entries:** Activation keywords, titles, and other metadata are not inserted into the context. Each entry's `content` should be a comprehensive, standalone description.
*   **Conciseness is Key:** To conserve prompt tokens, keep entry contents concise and focused on a single topic.

---
### **Part 2: Strategic Choices & Character Lore**

**1. Placement of Your Worldbook:**
*   **For Simple Lore -> Embed in `description`**: If your world is small, embed your lore directly in the character card's `description` field. This guarantees context but costs more tokens.
*   **For Complex Lore -> Use the `character_book` Object**: If your world is vast, use the structured `character_book` object. This is token-efficient and is the focus of this guide.

**2. Character-Specific Lore:**
You can assign one World Info file to a character as a dedicated lore source.
*   **To Assign:** Navigate to the Character Management panel, click the globe icon (ğŸŒ), select a World Info file, and click "Ok".
*   **To Unbind/Change:** Shift-click the globe icon. On mobile, use "More..." -> "Link World Info".

**3. Character Lore Insertion Strategy:**
When both global and character-specific WI are active, their entries are combined based on a chosen strategy:
*   **Sorted Evenly (Default):** All entries are sorted by their `order` as if they were in one large file.
*   **Character Lore First:** Character WI entries are inserted first (respecting their `order`), followed by global WI entries.
*   **Global Lore First:** Global WI entries are inserted first, followed by character WI entries.

---
### **Part 3: World Info Entry Breakdown**

This table provides a comprehensive breakdown of all fields available for a World Info entry.

| Field | Explanation & Recommendation |
| :--- | :--- |
| `uid` | **Unique Identifier**: A unique number for each entry. Managed automatically by the UI. |
| `keys` | **Primary Keys**: A list of keywords that trigger the entry. Case-insensitive by default. Can be plain text or **JavaScript-style Regex** (e.g., `/(?:is talking about|notices) the weather/i`). |
| `secondary_keys` | **Secondary Keys**: (Optional Filter) A comma-separated list of additional keywords used with logic (`selectiveLogic`): `AND ANY`, `AND ALL`, `NOT ANY`, `NOT ALL`. |
| `content` | **Content**: The information to be injected into the context. **MUST be written in English.** Keep it concise and focused. |
| `comment` | **Comment/Memo**: Notes for the creator. The AI does not read this. Use it to label your entries for easy management. |
| `constant` | **Constant Insertion**: `true` injects the entry constantly, without needing a keyword. Ideal for fundamental world rules. Represented by a ğŸ”µ (Blue Circle) in the UI. |
| `vectorized` | **Vectorized Search**: `true` enables semantic (vector) search via the Vector Storage extension. Triggers if dialogue is *about* the topic, even without the exact keyword. Represented by a ğŸ”— (Chain Link). |
| `order` | **Insertion Order**: The insertion priority. **Lower numbers are inserted higher in the prompt**, making them more influential. (e.g., `10` for critical lore, `100` for minor details). |
| `position` | **Insertion Position**: Where in the prompt to insert content. `4` (After Char Defs) is default. Others: `0` (Before Char Defs), `1` (After Char Defs), `2` (Before Examples), `3` (After Examples), `Top/Bottom of AN`, `@ D` (specific depth). |
| `disable` | **Disable Entry**: `true` disables the entry, preventing it from triggering. Useful for temporarily turning off certain lore. |
| `probability` | **Trigger Probability**: A percentage (0-100) chance for the entry to be inserted when activated. `100` means it always inserts. Requires `useProbability` to be `true`. |
| `useProbability` | **Use Probability**: `true` enables the `probability` setting. |
| `selective` | **Selective Trigger**: `true` means the entry only triggers on keyword or vector match. |
| `selectiveLogic` | **Keyword Logic**: `0` for AND (all keys must match), `1` for OR (any key can match). Applies to `secondary_keys`. |
| `group` | **Inclusion Group**: Assigns the entry to a group. If multiple triggered entries share a group, only one is inserted. |
| `groupOverride`, `groupWeight`, `useGroupScoring` | **Group Priority Controls**: `groupWeight` adjusts random selection chance within a group. `useGroupScoring` selects the entry with the most key matches. `groupOverride` is a legacy setting. |
| `excludeRecursion` | **Exclude From Recursion**: `true` means this entry cannot be activated by other entries. |
| `preventRecursion` | **Prevent Further Recursion**: `true` means this entry, when activated, will not trigger any other entries. |
| `delayUntilRecursion` | **Delay Until Recursion**: `true` means this entry will only be activated during recursive checks, not the initial pass. |
| `scanDepth` | **Context Scan Depth**: Overrides the global setting. Defines how many recent messages are scanned for keys. |
| `caseSensitive` | **Case-Sensitive Keys**: `true` makes key matching case-sensitive. |
| `matchWholeWords` | **Match Whole Words**: `true` ensures keys only match whole words (e.g., "king" won't match "liking"). |
| `automationId` | **Automation ID**: Links the entry to STscript extensions for automated actions. |
| `role` | **Role Association**: `0` (System), `1` (User), `2` (AI/Assistant). Associates the entry with a specific role. |
| `timed_effects` (`sticky`, `cooldown`, `delay`) | **Timed Effects**: `sticky` keeps the entry active for N messages. `cooldown` prevents re-activation for N messages. `delay` prevents activation until N messages are in chat. |
| `displayIndex` | **Display Index**: Controls the display order of entries in the SillyTavern UI. |

---
### **Part 4: Activation & Context Management**

These settings are found in the collapsible menu at the top of the World Info screen.

*   **Scan Depth:** How many recent messages are scanned for keys. `0` disables keyword scanning (only recursion/constants work), `1` scans the last message, etc.
*   **Context % / Budget:** The maximum number of tokens WI entries can use, defined as a percentage of your total context or a fixed token amount.
*   **Recursive Scanning:** Allows entries to be activated by the content of other activated entries. This enables creating complex, interlinked lore.
*   **Vector Storage Matching:** An alternative to keyword matching that uses semantic similarity. Requires the Vector Storage extension to be enabled and configured.

---
### **Part 5: High-Quality English Entry Examples (Middle-earth)**

**Example 1: Constant, Foundational Lore**
```json
{
    "keys": [],
    "content": "The setting is Middle-earth, in the waning years of the Third Age. The shadow of Sauron of Mordor is stretching across the land. The One Ring, forged by Sauron, has been found. The free peoplesâ€”Men, Elves, and Dwarvesâ€”are anxious, and a great war feels imminent.",
    "comment": "Core world state. Always on.",
    "constant": true,
    "order": 1
}
```

**Example 2: Keyword-based, Specific Lore**
```json
{
    "keys": [
        "Rivendell",
        "Imladris"
    ],
    "content": "Rivendell, known as Imladris in Sindarin, is an Elven outpost in Middle-earth. It was founded and is ruled by Elrond, and is protected by his ring, Vilya. It serves as a hidden refuge for the Elves and their allies.",
    "comment": "Describes the location of Rivendell.",
    "constant": false,
    "order": 50
}
```

---
<a name="chinese-version-st-world-info"></a>
### **ä¸­æ–‡ç‰ˆ**
---

**SillyTavern ä¸–ç•Œä¿¡æ¯ï¼ˆè§’è‰²ä¹¦ï¼‰åˆ›ä½œè€…æŒ‡å—**

**æ–‡æ¡£ç›®çš„:**
æœ¬æŒ‡å—æä¾›äº†åœ¨ SillyTavern ä¸­åˆ›å»ºé«˜æ•ˆçš„â€œä¸–ç•Œä¿¡æ¯â€ï¼ˆWorld Infoï¼Œä¹Ÿç§°ä¸ºâ€œçŸ¥è¯†åº“â€ã€â€œè®°å¿†ä¹¦â€æˆ– `character_book`ï¼‰çš„æŠ€æœ¯è§„æ ¼å’Œæœ€ä½³å®è·µã€‚è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºåŠ¨æ€åœ°å°†ä¸Šä¸‹æ–‡æ’å…¥åˆ°æ‚¨çš„èŠå¤©ä¸­ï¼Œä»¥å¼•å¯¼ AI çš„å›å¤ã€‚

---
### **ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼•è¨€ä¸æ ¸å¿ƒæ¦‚å¿µ**

ä¸–ç•Œä¿¡æ¯ï¼ˆç®€ç§° WIï¼‰æ˜¯ä¸€ä¸ªåŠ¨æ€è¯å…¸ã€‚å®ƒä»…åœ¨æœ€è¿‘çš„èŠå¤©è®°å½•ä¸­å‡ºç°å…³è”çš„å…³é”®è¯æ—¶ï¼Œæ‰ä¼šä»å…¶æ¡ç›®ä¸­æ’å…¥ç›¸å…³ä¿¡æ¯ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿæ„å»ºæ·±åº¦ã€ä¸€è‡´çš„å™äº‹ä¸–ç•Œï¼Œè€Œä¸ä¼šä½¿ä¸Šä¸‹æ–‡çª—å£è¿‡è½½ã€‚

**æ ¸å¿ƒåŸåˆ™:**
*   **â€œä»…é™è‹±æ–‡å†…å®¹â€è§„åˆ™:** ä¸ºäº†è¾¾åˆ°æœ€ä½³æ•ˆæœï¼Œ**å¼ºçƒˆå»ºè®®**æ‰€æœ‰ä¸–ç•Œä¹¦æ¡ç›®çš„ `content` å­—æ®µéƒ½ç”¨**è‹±æ–‡**ä¹¦å†™ã€‚è¿™ä½¿å¾— AI æ¨¡å‹èƒ½å¤Ÿæœ€æœ‰æ•ˆåœ°åˆ©ç”¨å…¶æ ¸å¿ƒè®­ç»ƒæ•°æ®ï¼Œæ— è®ºè§’è‰²çš„ä¸»è¦å¯¹è¯è¯­è¨€æ˜¯ä»€ä¹ˆã€‚
*   **ç‹¬ç«‹çš„æ¡ç›®:** æ¿€æ´»å…³é”®è¯ã€æ ‡é¢˜å’Œå…¶ä»–å…ƒæ•°æ®ä¸ä¼šè¢«æ’å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚æ¯ä¸ªæ¡ç›®çš„ `content` éƒ½åº”è¯¥æ˜¯ä¸€ä¸ªå…¨é¢ã€ç‹¬ç«‹çš„æè¿°ã€‚
*   **ç®€æ´æ˜¯å…³é”®:** ä¸ºäº†èŠ‚çœ prompt tokenï¼Œè¯·ä¿æŒæ¡ç›®å†…å®¹ç®€æ´ï¼Œå¹¶ä¸“æ³¨äºå•ä¸ªä¸»é¢˜ã€‚

---
### **ç¬¬äºŒéƒ¨åˆ†ï¼šæˆ˜ç•¥é€‰æ‹©ä¸è§’è‰²çŸ¥è¯†åº“**

**1. æ‚¨çš„ä¸–ç•Œä¹¦çš„å­˜æ”¾ä½ç½®:**
*   **å¯¹äºç®€å•çš„èƒŒæ™¯çŸ¥è¯† -> åµŒå…¥ `description`**: å¦‚æœæ‚¨çš„ä¸–ç•Œè§‚è¾ƒå°ï¼Œè¯·å°†èƒŒæ™¯çŸ¥è¯†ç›´æ¥åµŒå…¥è§’è‰²å¡çš„ `description` å­—æ®µä¸­ã€‚è¿™èƒ½ä¿è¯ä¸Šä¸‹æ–‡ï¼Œä½†ä¼šæ¶ˆè€—æ›´å¤š tokenã€‚
*   **å¯¹äºå¤æ‚çš„èƒŒæ™¯çŸ¥è¯† -> ä½¿ç”¨ `character_book` å¯¹è±¡**: å¦‚æœæ‚¨çš„ä¸–ç•Œè§‚å¾ˆå®å¤§ï¼Œè¯·ä½¿ç”¨ç»“æ„åŒ–çš„ `character_book` å¯¹è±¡ã€‚è¿™åœ¨ token æ•ˆç‡ä¸Šæ›´é«˜ï¼Œä¹Ÿæ˜¯æœ¬æŒ‡å—çš„é‡ç‚¹ã€‚

**2. è§’è‰²ä¸“å±çŸ¥è¯†åº“:**
æ‚¨å¯ä»¥ä¸ºä¸€ä¸ªè§’è‰²åˆ†é…ä¸€ä¸ªä¸–ç•Œä¿¡æ¯æ–‡ä»¶ï¼Œä½œä¸ºå…¶ä¸“ç”¨çš„çŸ¥è¯†æ¥æºã€‚
*   **å¦‚ä½•åˆ†é…:** å¯¼èˆªåˆ°è§’è‰²ç®¡ç†é¢æ¿ï¼Œç‚¹å‡»åœ°çƒå›¾æ ‡ï¼ˆğŸŒï¼‰ï¼Œé€‰æ‹©ä¸€ä¸ªä¸–ç•Œä¿¡æ¯æ–‡ä»¶ï¼Œç„¶åç‚¹å‡»â€œç¡®å®šâ€ã€‚
*   **å¦‚ä½•è§£ç»‘/æ›´æ”¹:** æŒ‰ä½ Shift é”®å¹¶å•å‡»åœ°çƒå›¾æ ‡ã€‚åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œä½¿ç”¨â€œæ›´å¤š...â€ -> â€œé“¾æ¥ä¸–ç•Œä¿¡æ¯â€ã€‚

**3. è§’è‰²çŸ¥è¯†åº“æ’å…¥ç­–ç•¥:**
å½“å…¨å±€å’Œè§’è‰²ä¸“å±çš„ WI éƒ½å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶ï¼Œå®ƒä»¬çš„æ¡ç›®ä¼šæ ¹æ®æ‰€é€‰ç­–ç•¥è¿›è¡Œç»„åˆï¼š
*   **å‡åŒ€æ’åº (é»˜è®¤):** æ‰€æœ‰æ¡ç›®éƒ½æŒ‰ç…§å®ƒä»¬çš„ `order` è¿›è¡Œæ’åºï¼Œå°±åƒå®ƒä»¬åœ¨ä¸€ä¸ªå¤§æ–‡ä»¶ä¸­ä¸€æ ·ã€‚
*   **è§’è‰²çŸ¥è¯†åº“ä¼˜å…ˆ:** è§’è‰² WI æ¡ç›®ä¼šå…ˆè¢«æ’å…¥ï¼ˆéµå¾ªå…¶ `order`ï¼‰ï¼Œç„¶åæ˜¯å…¨å±€ WI æ¡ç›®ã€‚
*   **å…¨å±€çŸ¥è¯†åº“ä¼˜å…ˆ:** å…¨å±€ WI æ¡ç›®ä¼šå…ˆè¢«æ’å…¥ï¼Œç„¶åæ˜¯è§’è‰² WI æ¡ç›®ã€‚

---
### **ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¸–ç•Œä¿¡æ¯æ¡ç›®è¯¦è§£**

æœ¬è¡¨å…¨é¢è§£æäº†ä¸–ç•Œä¿¡æ¯æ¡ç›®ä¸­æ‰€æœ‰å¯ç”¨çš„å­—æ®µã€‚

| å­—æ®µ | è§£é‡Šä¸å»ºè®® |
| :--- | :--- |
| `uid` | **å”¯ä¸€æ ‡è¯†ç¬¦**: æ¯ä¸ªæ¡ç›®çš„å”¯ä¸€ç¼–å·ã€‚ç”±ç”¨æˆ·ç•Œé¢è‡ªåŠ¨ç®¡ç†ã€‚ |
| `keys` | **ä¸»å…³é”®è¯**: è§¦å‘æ¡ç›®çš„å…³é”®è¯åˆ—è¡¨ã€‚é»˜è®¤ä¸åŒºåˆ†å¤§å°å†™ã€‚å¯ä»¥æ˜¯çº¯æ–‡æœ¬æˆ– **JavaScript é£æ ¼çš„æ­£åˆ™è¡¨è¾¾å¼** (ä¾‹å¦‚, `/(?:æ­£åœ¨è°ˆè®º|æ³¨æ„åˆ°)å¤©æ°”/i`)ã€‚ |
| `secondary_keys` | **è¾…åŠ©å…³é”®è¯**: (å¯é€‰è¿‡æ»¤å™¨) ä¸€ä¸ªé€—å·åˆ†éš”çš„é™„åŠ å…³é”®è¯åˆ—è¡¨ï¼Œä¸é€»è¾‘è¿ç®—ç¬¦ (`selectiveLogic`) ä¸€èµ·ä½¿ç”¨ï¼š`AND ANY` (ä¸ä»»æ„ä¸€ä¸ªåŒ¹é…), `AND ALL` (ä¸å…¨éƒ¨åŒ¹é…), `NOT ANY` (ä¸ä¸ä»»æ„ä¸€ä¸ªåŒ¹é…), `NOT ALL` (ä¸ä¸å…¨éƒ¨åŒ¹é…)ã€‚ |
| `content` | **å†…å®¹**: å°†è¢«æ³¨å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯ã€‚**å¿…é¡»ç”¨è‹±æ–‡ä¹¦å†™ã€‚** ä¿æŒå…¶ç®€æ´å¹¶ä¸“æ³¨äºä¸€ä¸ªä¸»é¢˜ã€‚ |
| `comment` | **æ³¨é‡Š/å¤‡å¿˜å½•**: ç»™åˆ›ä½œè€…çš„æ³¨é‡Šã€‚AI ä¸ä¼šè¯»å–æ­¤å†…å®¹ã€‚ç”¨å®ƒæ¥æ ‡è®°æ‚¨çš„æ¡ç›®ï¼Œä¾¿äºç®¡ç†ã€‚ |
| `constant` | **æ’å®šæ’å…¥**: `true` è¡¨ç¤ºæ— éœ€å…³é”®è¯ï¼ŒæŒç»­æ³¨å…¥æ¡ç›®ã€‚é€‚ç”¨äºåŸºæœ¬çš„ä¸–ç•Œè§„åˆ™ã€‚åœ¨ UI ä¸­ç”± ğŸ”µ (è“è‰²åœ†åœˆ) è¡¨ç¤ºã€‚ |
| `vectorized` | **å‘é‡æœç´¢**: `true` é€šè¿‡ Vector Storage æ‰©å±•å¯ç”¨è¯­ä¹‰ï¼ˆå‘é‡ï¼‰æœç´¢ã€‚å¦‚æœå¯¹è¯ä¸è¯¥ä¸»é¢˜*ç›¸å…³*ï¼Œå³ä½¿æ²¡æœ‰ç¡®åˆ‡çš„å…³é”®è¯ï¼Œä¹Ÿå¯ä»¥è§¦å‘ã€‚åœ¨ UI ä¸­ç”± ğŸ”— (é“¾ç¯) è¡¨ç¤ºã€‚ |
| `order` | **æ’å…¥é¡ºåº**: æ’å…¥ä¼˜å…ˆçº§ã€‚**æ•°å­—è¶Šå°ï¼Œåœ¨ prompt ä¸­æ’å…¥çš„ä½ç½®å°±è¶Šé å‰**ï¼Œå› æ­¤å½±å“åŠ›æ›´å¤§ã€‚ï¼ˆä¾‹å¦‚ï¼Œ`10` ç”¨äºå…³é”®çŸ¥è¯†ï¼Œ`100` ç”¨äºæ¬¡è¦ç»†èŠ‚ï¼‰ã€‚ |
| `position` | **æ’å…¥ä½ç½®**: åœ¨ prompt ä¸­æ’å…¥å†…å®¹çš„ä½ç½®ã€‚`4` (åœ¨è§’è‰²å®šä¹‰ä¹‹å) æ˜¯é»˜è®¤å€¼ã€‚å…¶ä»–ï¼š`0` (è§’è‰²å®šä¹‰å‰), `1` (è§’è‰²å®šä¹‰å), `2` (ç¤ºä¾‹æ¶ˆæ¯å‰), `3` (ç¤ºä¾‹æ¶ˆæ¯å), `ä½œè€…ç¬”è®°é¡¶éƒ¨/åº•éƒ¨`, `@ D` (ç‰¹å®šæ·±åº¦)ã€‚ |
| `disable` | **ç¦ç”¨æ¡ç›®**: `true` ç¦ç”¨è¯¥æ¡ç›®ï¼Œä½¿å…¶æ— æ³•è§¦å‘ã€‚é€‚ç”¨äºä¸´æ—¶å…³é—­æŸäº›èƒŒæ™¯ä¿¡æ¯ã€‚ |
| `probability` | **è§¦å‘æ¦‚ç‡**: ä¸€ä¸ªç™¾åˆ†æ¯”ï¼ˆ0-100ï¼‰ï¼Œè¡¨ç¤ºæ¡ç›®åœ¨è¢«æ¿€æ´»æ—¶æ’å…¥çš„å‡ ç‡ã€‚`100` æ„å‘³ç€æ€»æ˜¯æ’å…¥ã€‚éœ€è¦å°† `useProbability` è®¾ä¸º `true`ã€‚ |
| `useProbability` | **å¯ç”¨æ¦‚ç‡**: `true` å¯ç”¨ `probability` è®¾ç½®ã€‚ |
| `selective` | **é€‰æ‹©æ€§è§¦å‘**: `true` è¡¨ç¤ºæ¡ç›®ä»…åœ¨å…³é”®è¯æˆ–å‘é‡åŒ¹é…æ—¶è§¦å‘ã€‚ |
| `selectiveLogic` | **å…³é”®è¯é€»è¾‘**: `0` è¡¨ç¤º AND (æ‰€æœ‰å…³é”®è¯å¿…é¡»åŒ¹é…)ï¼Œ`1` è¡¨ç¤º OR (ä»»æ„å…³é”®è¯å³å¯åŒ¹é…)ã€‚é€‚ç”¨äº `secondary_keys`ã€‚ |
| `group` | **çº³å…¥ç»„**: å°†æ¡ç›®åˆ†é…åˆ°ä¸€ä¸ªç»„ã€‚å¦‚æœå¤šä¸ªè¢«è§¦å‘çš„æ¡ç›®å…±äº«ä¸€ä¸ªç»„ï¼Œåˆ™åªä¼šæ’å…¥å…¶ä¸­ä¸€ä¸ªã€‚ |
| `groupOverride`, `groupWeight`, `useGroupScoring` | **ç»„ä¼˜å…ˆçº§æ§åˆ¶**: `groupWeight` è°ƒæ•´ç»„å†…éšæœºé€‰æ‹©çš„æƒé‡ã€‚`useGroupScoring` é€‰æ‹©åŒ¹é…å…³é”®è¯æœ€å¤šçš„æ¡ç›®ã€‚`groupOverride` æ˜¯ä¸€ä¸ªé—ç•™è®¾ç½®ã€‚ |
| `excludeRecursion` | **æ’é™¤é€’å½’**: `true` è¡¨ç¤ºæ­¤æ¡ç›®ä¸èƒ½è¢«å…¶ä»–æ¡ç›®æ¿€æ´»ã€‚ |
| `preventRecursion` | **é˜»æ­¢è¿›ä¸€æ­¥é€’å½’**: `true` è¡¨ç¤ºæ­¤æ¡ç›®è¢«æ¿€æ´»åï¼Œä¸ä¼šè§¦å‘ä»»ä½•å…¶ä»–æ¡ç›®ã€‚ |
| `delayUntilRecursion` | **å»¶è¿Ÿè‡³é€’å½’**: `true` è¡¨ç¤ºæ­¤æ¡ç›®åªä¼šåœ¨é€’å½’æ£€æŸ¥æœŸé—´è¢«æ¿€æ´»ï¼Œè€Œä¸æ˜¯åœ¨åˆå§‹æ‰«ææ—¶ã€‚ |
| `scanDepth` | **ä¸Šä¸‹æ–‡æ‰«ææ·±åº¦**: è¦†ç›–å…¨å±€è®¾ç½®ã€‚å®šä¹‰æ‰«æå¤šå°‘æ¡æœ€è¿‘çš„æ¶ˆæ¯ä»¥æŸ¥æ‰¾å…³é”®è¯ã€‚ |
| `caseSensitive` | **åŒºåˆ†å¤§å°å†™**: `true` ä½¿å…³é”®è¯åŒ¹é…åŒºåˆ†å¤§å°å†™ã€‚ |
| `matchWholeWords` | **åŒ¹é…æ•´ä¸ªå•è¯**: `true` ç¡®ä¿å…³é”®è¯åªåŒ¹é…å®Œæ•´çš„å•è¯ï¼ˆä¾‹å¦‚ï¼Œâ€œkingâ€ä¸ä¼šåŒ¹é…â€œlikingâ€ï¼‰ã€‚ |
| `automationId` | **è‡ªåŠ¨åŒ–ID**: å°†æ¡ç›®ä¸ STscript æ‰©å±•é“¾æ¥ï¼Œä»¥æ‰§è¡Œè‡ªåŠ¨åŒ–æ“ä½œã€‚ |
| `role` | **è§’è‰²å…³è”**: `0` (ç³»ç»Ÿ), `1` (ç”¨æˆ·), `2` (AI/åŠ©æ‰‹)ã€‚å°†æ¡ç›®ä¸ç‰¹å®šè§’è‰²å…³è”ã€‚ |
| `timed_effects` (`sticky`, `cooldown`, `delay`) | **å®šæ—¶æ•ˆæœ**: `sticky` ä½¿æ¡ç›®åœ¨æ¿€æ´»åæŒç»­ N æ¡æ¶ˆæ¯ã€‚`cooldown` åœ¨ N æ¡æ¶ˆæ¯å†…é˜»æ­¢å†æ¬¡æ¿€æ´»ã€‚`delay` åœ¨èŠå¤©è¾¾åˆ° N æ¡æ¶ˆæ¯å‰é˜»æ­¢æ¿€æ´»ã€‚ |
| `displayIndex` | **æ˜¾ç¤ºç´¢å¼•**: æ§åˆ¶æ¡ç›®åœ¨ SillyTavern ç”¨æˆ·ç•Œé¢ä¸­çš„æ˜¾ç¤ºé¡ºåºã€‚ |

---
### **ç¬¬å››éƒ¨åˆ†ï¼šæ¿€æ´»ä¸ä¸Šä¸‹æ–‡ç®¡ç†**

è¿™äº›è®¾ç½®ä½äºä¸–ç•Œä¿¡æ¯å±å¹•é¡¶éƒ¨çš„å¯æŠ˜å èœå•ä¸­ã€‚

*   **æ‰«ææ·±åº¦ (Scan Depth):** æ‰«æå¤šå°‘æ¡æœ€è¿‘çš„æ¶ˆæ¯ä»¥æŸ¥æ‰¾å…³é”®è¯ã€‚`0` ç¦ç”¨å…³é”®è¯æ‰«æï¼ˆåªæœ‰é€’å½’/å¸¸é‡æ¡ç›®æœ‰æ•ˆï¼‰ï¼Œ`1` æ‰«ææœ€åä¸€æ¡æ¶ˆæ¯ï¼Œä»¥æ­¤ç±»æ¨ã€‚
*   **ä¸Šä¸‹æ–‡ç™¾åˆ†æ¯”/é¢„ç®— (Context % / Budget):** WI æ¡ç›®å¯ä»¥ä½¿ç”¨çš„æœ€å¤§ token æ•°é‡ï¼Œå®šä¹‰ä¸ºæ€»ä¸Šä¸‹æ–‡çš„ç™¾åˆ†æ¯”æˆ–å›ºå®šçš„ token æ•°é‡ã€‚
*   **é€’å½’æ‰«æ (Recursive Scanning):** å…è®¸æ¡ç›®è¢«å…¶ä»–å·²æ¿€æ´»æ¡ç›®çš„å†…å®¹æ¿€æ´»ã€‚è¿™ä½¿å¾—åˆ›å»ºå¤æ‚çš„ã€ç›¸äº’å…³è”çš„çŸ¥è¯†åº“æˆä¸ºå¯èƒ½ã€‚
*   **å‘é‡å­˜å‚¨åŒ¹é… (Vector Storage Matching):** ä¸€ç§æ›¿ä»£å…³é”®è¯åŒ¹é…çš„æ–¹æ³•ï¼Œå®ƒä½¿ç”¨è¯­ä¹‰ç›¸ä¼¼æ€§ã€‚éœ€è¦å¯ç”¨å¹¶é…ç½® Vector Storage æ‰©å±•ã€‚

---
### **ç¬¬äº”éƒ¨åˆ†ï¼šé«˜è´¨é‡è‹±æ–‡æ¡ç›®èŒƒä¾‹ï¼ˆä¸­åœŸä¸–ç•Œï¼‰**

**èŒƒä¾‹ 1: æ’å®šæ³¨å…¥çš„åŸºç¡€çŸ¥è¯†**
```json
{
    "keys": [],
    "content": "The setting is Middle-earth, in the waning years of the Third Age. The shadow of Sauron of Mordor is stretching across the land. The One Ring, forged by Sauron, has been found. The free peoplesâ€”Men, Elves, and Dwarvesâ€”are anxious, and a great war feels imminent.",
    "comment": "æ ¸å¿ƒä¸–ç•ŒçŠ¶æ€ã€‚å§‹ç»ˆå¼€å¯ã€‚",
    "constant": true,
    "order": 1
}
```

**èŒƒä¾‹ 2: åŸºäºå…³é”®è¯çš„ç‰¹å®šçŸ¥è¯†**
```json
{
    "keys": [
        "Rivendell",
        "Imladris"
    ],
    "content": "Rivendell, known as Imladris in Sindarin, is an Elven outpost in Middle-earth. It was founded and is ruled by Elrond, and is protected by his ring, Vilya. It serves as a hidden refuge for the Elves and their allies.",
    "comment": "æè¿°ç‘æ–‡æˆ´å°”è¿™ä¸ªåœ°ç‚¹ã€‚",
    "constant": false,
    "order": 50
}