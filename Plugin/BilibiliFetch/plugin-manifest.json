{
  "manifestVersion": "1.0.0",
  "name": "BilibiliFetch",
  "displayName": "Bilibili 内容获取插件",
  "version": "0.1.0",
  "description": "根据 Bilibili URL 获取视频信息、字幕、弹幕、评论及快照截图。",
  "author": "ldlh的vcp agent",
  "pluginType": "synchronous",
  "entryPoint": {
    "type": "python",
    "command": "python BilibiliFetch.py"
  },
  "communication": {
    "protocol": "stdio",
    "timeout": 30000
  },
  "configSchema": {
    "BILIBILI_COOKIE": "string"
  },
  "capabilities": {
    "invocationCommands": [
      {
        "commandIdentifier": "BilibiliFetch",
        "description": "调用此工具获取 Bilibili 视频信息（标题、作者）、字幕、热门弹幕、热门评论、高能进度条（弹幕集中的时间点）以及视频特定时间点的快照截图。支持长链接和 b23.tv 短链接。\n\n参数:\n- url (字符串, 必需): Bilibili 视频的 URL (支持 b23.tv 短链接)。\n- lang (字符串, 可选): 字幕语言代码, 例如 'ai-zh' 或 'ai-en'。\n- danmaku_num (数字, 可选): 获取热门弹幕的数量，默认为 0。\n- comment_num (数字, 可选): 获取热门评论的数量，默认为 0。\n- snapshots (字符串, 可选): 想要查看快照的时间点（秒），多个时间点用逗号分隔，例如 '10,60,120'。\n- need_subs (布尔值, 可选): 是否需要获取字幕，默认为 true。\n- need_pbp (布尔值, 可选): 是否获取弹幕热度最高的几个时间点，方便后续获取快照，默认为 true。\n\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」BilibiliFetch「末」,\nurl:「始」视频URL「末」,\ndanmaku_num:「始」5「末」,\nneed_pbp:「始」true「末」\n<<<[END_TOOL_REQUEST]>>>\n\n重要提示：\n1. 插件返回多模态结构化数据，包含文本和 HTML <img> 标签。\n2. 请务必将返回结果中的 <img> 标签原样展示给用户以便渲染快照。",
        "example": "<<<[TOOL_REQUEST]>>>\ntool_name:「始」BilibiliFetch「末」,\nurl:「始」https://b23.tv/b6PME73「末」,\ndanmaku_num:「始」10「末」,\nsnapshots:「始」15,45「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "commandIdentifier": "BilibiliSearch",
        "description": "关键词搜索 Bilibili 视频或 UP 主。支持分页获取结果。\n\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」BilibiliFetch「末」,\naction:「始」search「末」,\nkeyword:「始」搜索关键词，如Python「末」,\nsearch_type:「始」'video' (搜索视频) 或 'bili_user' (搜索用户)。默认为 'video'「末」,\npage:「始」(可选): 页码，默认为 1「末」\n<<<[END_TOOL_REQUEST]>>>"
      },
      {
        "commandIdentifier": "GetUpVideos",
        "description": "获取指定 UP 主（通过 mid）的所有投稿视频 BV 号。常用于在搜索到用户后，进一步获取其视频列表，B 站短链接的固定格式为 https://b23.tv/BV号，长链接的固定格式为 https://www.bilibili.com/video/BV号，让我们继续来看这个up主的精彩视频吧。\n\n调用格式:\n<<<[TOOL_REQUEST]>>>\ntool_name:「始」BilibiliFetch「末」,\naction:「始」get_up_videos「末」,\nmid:「始」目标用户的 ID (mid)「末」,\npn:「始」页码，默认为 1「末」,\nps:「始」(可选): 每页项数，最大 50，默认为 30「末」\n<<<[END_TOOL_REQUEST]>>>"
      }
    ]
  }
}