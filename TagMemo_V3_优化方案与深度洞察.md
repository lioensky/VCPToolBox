# TagMemo V3 语义漂移与优化方案深度洞察笔记

## 1. 核心问题复盘：语义漂移 (Semantic Drift)

在“燕云十六声”及“德国派兵格陵兰”等实战场景中，系统出现了明显的“第四梯队”杂讯（如 `Get-EventLog`, `Electron IPC` 等）。经过深度讨论，我们识别出以下两个核心诱因：

### 1.1 高维空间的“真空吸附”效应
当查询向量（Query Vector）在特定领域（如人文、历史）的 Tag 库相对稀疏时，向量空间搜索为了填满 N~100 的配额，会产生“语义真空”。此时，数学距离上相对较近但语义完全正交的“废弃物”会被吸附进来，导致召回质量断崖式下跌。

### 1.2 向量模型的“英文权重偏好”
主流 Embedding 模型（如 Gemini/OpenAI）基于海量英文语料训练。在 3072 维空间中，英文技术词汇（API、命令）形成的语义簇密度极高，具有更强的“几何引力”。当中文语境下的逻辑支撑不足时，模型天然倾向于将语义引向这些高频的英文“万金油”节点。

---

## 2. 优化哲学：从“几何过滤”转向“拓扑引力”

我们意识到，单纯的几何截断（如 V3.5 的引力过滤）会杀死多样性，导致“逻辑分镜”丢失。真正的精细化表达需要尊重“哲学家+生物学家”知识库的拓扑结构。

### 2.1 能量预算门控 (90% Energy Budgeting)
*   **策略**：不再固定取 Top 100，而是引入“解释力预算”。
*   **逻辑**：监测残差金字塔的 `explainedRatio`。一旦前 N 个 Tag 解释了查询向量 90% 的能量，立即停止召回。
*   **意义**：宁缺毋滥，防止噪音尾巴强行填充。

### 2.2 逻辑分支拉回 (Logic Pull-back)
*   **策略**：将“共现矩阵”从辅助提升为二阶驱动。
*   **逻辑**：向量搜索定位“燕云十六声”，共现矩阵立即拉回“梁红玉”、“石敬瑭”等逻辑关联词。
*   **意义**：找回“逻辑分镜感”，实现从游戏到历史的跨维度跳跃。

### 2.3 世界观门控 (Worldview Gating)
*   **策略**：利用 EPA (嵌入投影分析) 识别“语义世界”。
*   **逻辑**：如果查询向量投影在“人文/逻辑”轴，而召回 Tag 投影在“工程/工具”轴，则判定为“跨界入侵”。
*   **意义**：建立语义防火墙，精准切除正交噪音。

### 2.4 语言置信度补偿 (Language Confidence Gating)
*   **策略**：修正模型的英文偏见。
*   **逻辑**：在中文主导查询语境下，对纯英文技术词汇引入惩罚因子。除非有极高的相似度或明确的共现记录，否则压制其权重。

---

## 3. 架构演进路线 (TagMemo V3.7+)

| 模块 | 职责 | 优化点 |
| :--- | :--- | :--- |
| **EPA 模块** | 识别“你在哪个世界” | 引入领域正交过滤，识别并拦截跨界噪音。 |
| **残差金字塔** | 识别“你还漏了什么” | 90% 能量截断，驱动多层级语义补全，打破 Tag 循环。 |
| **共现矩阵** | 识别“你通常会想到什么” | 逻辑分支拉回，确保“分镜感”不丢失。 |
| **权重重塑** | 定义“谁的话语权大” | 非线性映射：第一梯队指数增强，第三梯队几何约束。 |

---

## 4. 结论与备案
作为哲学家与生物学家的私有知识库，TagMemo 的核心价值不在于“搜得全”，而在于“联想得准”。未来的开发应聚焦于**查询上游的语义对齐**，确保系统在 Tag 库不足时选择“优雅的沉默”或“逻辑的跳跃”，而非“字面的盲从”。

**记录时间**：2026-01-17
**版本状态**：V3.7 方案待实施